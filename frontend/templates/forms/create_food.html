{% extends "base.html" %}
{% block title %}发布带饭 - UniRun{% endblock %}

{% block content %}
<div class="auth-wrapper fade-in" style="display: flex; justify-content: center; min-height: calc(100vh - 140px); background: #fff;">
    
    <div style="width: 100%; max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; justify-content: space-between; min-height: 100%;margin-top: -90px;">
        <h2 style="text-align: center; font-size: 24px; font-weight: 800; color: #0F172A; margin-bottom: 40px;">
            发布带饭需求
        </h2>

        <form id="publish-form" data-category="food" style="display: flex; flex-direction: column; gap: 0.6rem;">
            <input type="hidden" name="location_pickup" id="input_location_pickup" required>

            <div class="form-group">
                <label class="form-label">选择食堂</label>
                <div class="selector-grid">
                    <div class="canteen-item" onclick="selectCanteen(this, '天赐庄东区食堂')">
                        <img src="https://images.unsplash.com/photo-1554679665-f5537f187268?auto=format&fit=crop&w=300&q=80" alt="天赐庄东区食堂">
                        <span>天赐庄东区食堂</span>
                    </div>
                    <div class="canteen-item" onclick="selectCanteen(this, '天赐庄本部食堂')">
                        <img src="https://images.unsplash.com/photo-1592861956120-e524fc739696?auto=format&fit=crop&w=300&q=80" alt="天赐庄本部食堂">
                        <span>天赐庄本部食堂</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">想吃什么</label>
                <input type="text" name="description" class="form-input" placeholder="例如：二楼滑蛋饭，微辣" style="height: 56px;" required>
            </div>

            <div class="form-group">
                <label class="form-label">送达地址</label>
                <input type="text" name="location_deliver" class="form-input" placeholder="例如：东18栋 302" style="height: 56px;" required>
            </div>

            <div class="price-display-box orange">
                <div class="price-label-text">
                    预估赏金<br>
                    <span style="font-size: 12px; font-weight: 400; opacity: 0.8;">含跑腿费</span>
                </div>
                <div style="display: flex; align-items: center; gap: 5px;">
                    <span style="font-size: 20px; font-weight: bold;">¥</span>
                    <input type="number" name="reward_points" value="5" min="1" 
                           style="background: transparent; border: none; font-size: 32px; font-weight: 800; color: #9A3412; width: 60px; text-align: right; outline: none; font-family: 'DIN Alternate', sans-serif;">
                </div>
            </div>
            
            <input type="hidden" name="location_deliver" value="宿舍楼" > <button type="submit" class="btn btn-submit btn-block">
                <i class="fas fa-check" style="margin-right: 8px;"></i> 发布订单
            </button>
        </form>
    </div>

    <a href="/" class="floating-back-btn">
        <i class="fas fa-arrow-left"></i> 返回大厅
    </a>

</div>

<script>
    function selectCanteen(element, value) {
        // 移除所有选中态
        document.querySelectorAll('.canteen-item').forEach(el => el.classList.remove('active'));
        // 添加当前选中态
        element.classList.add('active');
        // 更新隐藏 Input
        document.getElementById('input_location_pickup').value = value;
    }
</script>
{% endblock %}
{% block scripts %}<script src="/static/js/publish.js"></script>{% endblock %}