{% extends "base.html" %}
{% block title %}发布打印 - UniRun{% endblock %}

{% block content %}
<div class="auth-wrapper fade-in" style="background: transparent; min-height: auto; padding-top: 20px;">
    
    <div style="width: 100%; max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; justify-content: center;">
        <h2 style="text-align: center; font-size: 24px; font-weight: 800; color: #0F172A; margin-bottom: 30px;">
            发布打印需求
        </h2>

        <form id="publish-form" data-category="print" style="display: flex; flex-direction: column; gap: 0.6rem;">
            
            <div class="form-group">
                <div class="upload-area" onclick="document.getElementById('file-upload').click()">
                    <div class="upload-icon">
                        <i class="fas fa-file-upload"></i>
                    </div>
                    <div style="font-weight: 700; color: #9333EA; font-size: 16px; margin-bottom: 5px;">点击上传文件</div>
                    <div style="color: #94A3B8; font-size: 13px;">支持 PDF, Word</div>
                    <input type="file" id="file-upload" style="display: none;">
                </div>
                
                <div id="file-list-display" style="margin-top: 15px;"></div>
            </div>

            <div class="form-group">
                <label class="form-label">备注</label>
                <input type="text" name="description" class="form-input" placeholder="例如：期末复习资料，双面打印" style="height: 56px;" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">送达地址</label>
                <input type="text" name="location_deliver" class="form-input" placeholder="例如：东18栋 302" style="height: 56px;" required>
            </div>

            <input type="hidden" name="reward_points" value="2">
            <button type="submit" class="btn btn-submit btn-block">
                <i class="fas fa-check" style="margin-right: 8px;"></i> 发布订单
            </button>
        </form>
    </div>

    <a href="/" class="floating-back-btn">
        <i class="fas fa-arrow-left"></i> 返回大厅
    </a>
</div>

<script>
    document.getElementById('file-upload').addEventListener('change', function(e) {
        const file = e.target.files[0];
        const display = document.getElementById('file-list-display');
        if (file) {
            display.innerHTML = `
                <div style="display:flex; align-items:center; gap:10px; background:#F7FAFC; padding:10px; border-radius:10px; border:1px solid #E2E8F0;">
                    <i class="fas fa-file-alt" style="color:#9333EA;"></i>
                    <span style="font-size:14px; color:#1A202C; font-weight:600;">${file.name}</span>
                    <i class="fas fa-check-circle" style="color:#48BB78; margin-left:auto;"></i>
                </div>
            `;
        } else {
            display.innerHTML = '';
        }
    });
</script>
{% endblock %}
{% block scripts %}<script src="/static/js/publish.js"></script>{% endblock %}